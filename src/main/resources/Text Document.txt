create table public.wallets
(
    id      bigserial
        unique,
    balance numeric default 0.00
);

alter table public.wallets
    owner to postgres;

create table public.users
(
    id                bigserial
        primary key
        unique,
    login             varchar not null
        unique,
    password          varchar not null,
    email             varchar not null
        unique,
    registration_date date    not null,
    score             numeric default 0.00,
    wallet_id         integer
        constraint users_wallets_id_fk
            references public.wallets (id)
            on update cascade on delete cascade
);

alter table public.users
    owner to postgres;

create table public.users_data
(
    id            bigserial
        unique,
    user_id       bigint                                                               not null
        unique
        constraint users_data_fk
            references public.users,
    first_name    varchar   default 'unknown'::bpchar,
    last_name     varchar   default 'unknown'::bpchar,
    country       varchar   default 'unknown'::bpchar,
    phone_number  varchar   default 'unknown'::bpchar,
    date_of_birth date      default '2000-01-01 00:00:00'::timestamp without time zone,
    changed       timestamp default '2000-01-01 00:00:00'::timestamp without time zone not null
);

alter table public.users_data
    owner to postgres;

create table public.games
(
    id          bigserial
        unique,
    type        varchar   not null,
    time_create timestamp not null,
    finish      timestamp,
    status      varchar
);

alter table public.games
    owner to postgres;

create table public.users_games
(
    id      bigserial
        unique,
    game_id integer not null
        constraint users_games_games_id_fk
            references public.games (id),
    user_id integer not null
        constraint users_games_users_id_fk
            references public.users
);

alter table public.users_games
    owner to postgres;

create table public.roulette_games
(
    id      bigserial
        unique,
    game_id integer not null
        unique
        constraint roulette_games_games_id_fk
            references public.games (id),
    spin    integer,
    wins    integer,
    losses  integer,
    result  numeric
);

alter table public.roulette_games
    owner to postgres;

create table public.bets_roulette
(
    id              bigserial
        unique,
    game_id         integer not null
        constraint bets_roulette_roulette_games_game_id_fk
            references public.roulette_games (game_id),
    type            varchar not null,
    amount          numeric,
    roulette_number integer,
    player_choise   varchar,
    winning_amount  numeric default 0
);

alter table public.bets_roulette
    owner to postgres;

