create table public.users
(
    id                bigserial
        primary key
        unique,
    login             varchar                                   not null
        unique,
    password          varchar                                   not null,
    email             varchar                                   not null
        unique,
    registration_date date                                      not null,
    score             numeric default 0.00,
    role              varchar default 'USER'::character varying not null,
    is_deleted        boolean default false                     not null
);

alter table public.users
    owner to postgres;

create table public.users_data
(
    id            bigserial
        unique,
    user_id       bigint                                                               not null
        unique
        constraint users_data_fk
            references public.users,
    first_name    varchar   default 'unknown'::bpchar,
    last_name     varchar   default 'unknown'::bpchar,
    country       varchar   default 'unknown'::bpchar,
    phone_number  varchar   default 'unknown'::bpchar,
    date_of_birth date      default '2000-01-01 00:00:00'::timestamp without time zone,
    changed       timestamp default '2000-01-01 00:00:00'::timestamp without time zone not null
);

alter table public.users_data
    owner to postgres;

create table public.wallets
(
    id      bigserial
        unique,
    balance numeric default 0.00,
    user_id integer not null
        unique
        constraint wallets_users_id_fk
            references public.users
);

alter table public.wallets
    owner to postgres;

create table public.games
(
    id          bigserial
        unique,
    type        varchar   not null,
    time_create timestamp not null,
    finish      timestamp,
    status      varchar   not null,
    result      numeric
);

alter table public.games
    owner to postgres;

create table public.users_games
(
    id      bigserial
        unique,
    game_id integer not null
        constraint users_games_games_id_fk
            references public.games (id),
    user_id integer not null
        constraint users_games_users_id_fk
            references public.users
);

alter table public.users_games
    owner to postgres;

create table public.roulette_games
(
    id      bigserial
        unique,
    game_id integer not null
        unique
        constraint roulette_games_games_id_fk
            references public.games (id)
            on update cascade on delete cascade,
    spin    integer,
    wins    integer,
    losses  integer,
    result  numeric,
    status  varchar not null,
    changed timestamp
);

alter table public.roulette_games
    owner to postgres;

create table public.bets_roulette
(
    id              bigserial
        unique,
    game_id         integer not null
        constraint bets_roulette_roulette_games_game_id_fk
            references public.roulette_games (game_id)
            on update cascade on delete cascade,
    type            varchar not null,
    amount          numeric,
    roulette_number integer,
    player_choise   varchar,
    winning_amount  numeric default 0
);

alter table public.bets_roulette
    owner to postgres;

create table public.texasholdem_games
(
    id             bigserial
        unique,
    game_id        integer                               not null
        constraint texasholdem_games_games_id_fk
            references public.games (id),
    bank           numeric default 0.00                  not null,
    player_preflop varchar default ''::character varying not null,
    casino_preflop varchar default ''::character varying not null,
    flop           varchar default ''::character varying,
    tern           varchar default ''::character varying,
    river          varchar default ''::character varying,
    result         numeric default 0.00,
    status         varchar                               not null,
    changed        timestamp,
    player_deposit numeric                               not null,
    winner         varchar
);

alter table public.texasholdem_games
    owner to postgres;

create table public.bets_poker
(
    id            bigserial
        unique,
    game_id       integer not null
        constraint bets_poker_games_id_fk
            references public.games (id),
    type_player   varchar not null,
    type_casino   varchar,
    player_amount numeric,
    round         integer not null,
    casino_amount numeric
);

alter table public.bets_poker
    owner to postgres;

